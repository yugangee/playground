# 등급 시스템 (축구 / 풋살)

## 점수 산정 (대전형 스포츠 공통)

모든 대전형 스포츠(축구, 풋살, 농구, 야구, 배구, 아이스하키)에 동일 적용.

경기 완료 시 기본 +3점 (참여), 결과 보너스 추가:

| 결과 | 참여 | 보너스 | 합계 |
|------|------|--------|------|
| 승리 | +3 | +4 | +7 |
| 무승부 | +3 | +1 | +4 |
| 패배 | +3 | +0 | +3 |

### 연승 보너스

| 연승 | 보너스 | 승리 합계 |
|------|--------|-----------|
| 2연승 | +1 | +8 |
| 3연승 | +2 | +9 |
| 4연승 | +3 | +10 |

- 무승부/패배 시 연승 초기화
- 개인/팀 동일 적용

---

## 개인 등급 (축구/풋살)

| 등급 | 누적 점수 | 요구 승수 | 특징 |
|------|-----------|-----------|------|
| 비기너 (B) | 0-24 | 3-4승 | 입문 단계 |
| 스타터 (S) | 25-100 | +11승 | 매칭 적응 |
| 아마추어 (A) | 101-300 | +28승 | 동호인 평균, 가장 두터운 층 |
| 세미프로 (SP) | 301-700 | +57승 | 지역구 고수, 체계적 팀플 |
| 프로 (P) | 701+ | 무한 | 최상위 랭커 및 선수 출신 |

- 비기너에서 스타터 문턱 낮게 설정
- 이후 구간 약 1.5~2배씩 증가

> 다른 종목(농구/야구/배구/아이스하키) 커트라인은 별도 설정 예정

---

## 팀 등급 (축구/풋살)

| 팀 등급 | 누적 TP | 승급 조건 | 혜택 (예시) |
|---------|---------|-----------|------------|
| 루키 (Rookie) | 0-50 | 창단 초기 단계 | 팀 페이지 생성, 기본 엠블럼 |
| 클럽 (Club) | 51-250 | 누적 20승 이상 | 전용 유니폼 색상 커스텀 |
| 크루 (Crew) | 251-800 | 팀원 평균 등급 스타터 이상 | 지역 랭킹 진입, 팀 전적 상세 분석 |
| 엘리트 (Elite) | 801-2000 | 팀원 평균 등급 아마추어 이상 | 상위 등급 팀 매칭 우선권 |
| 레전드 (Legend) | 2001+ | 전국 랭킹 TOP 50 이내 | 명예의 전당 등록, 독점 엠블럼 프레임 |

- TP 커트라인 + 추가 조건 모두 충족 필요
- TP 산정은 개인 점수와 동일 (참여+3, 승+4, 무+1, 패+0, 연승보너스)

> 다른 종목 팀 등급도 별도 설정 예정

---

## 데이터 구조 (예정)

```json
// playground-users (개인)
{
  "ratings": {
    "축구": { "tier": "A", "points": 150, "games": 30, "wins": 18, "winStreak": 2 },
    "풋살": { "tier": "S", "points": 60, "games": 12, "wins": 8, "winStreak": 0 }
  }
}

// playground-clubs (팀)
{
  "teamRating": { "tier": "Club", "tp": 180, "games": 35, "wins": 22, "winStreak": 3 }
}
```

## UI 표시 위치 (TODO)

- 마이페이지 (개인 등급)
- 팀 관리 페이지 (팀 등급)
- 멤버 목록 (개인 등급 뱃지)
- 클럽 탐색 카드 (팀 등급 뱃지)

---

## 경기 결과 입력 플로우

### 매치 흐름

1. 클럽 탐색 페이지에서 팀A → 팀B에 경기 제안
2. 팀B 전원에게 알림 → 팀 관리 페이지 "경기 제안" 섹션에 표시
3. 팀B 수락 → 매치 성립 (상태: scheduled)
4. 두 팀 주장끼리 채팅방 자동 생성 → 시간/장소 협의
5. 경기 진행
6. 경기 후 각 팀 주장이 팀 관리 페이지에서 결과 입력 (스코어)
7. 양쪽 결과 일치 → 경기 확정 (상태: confirmed) → 등급/포인트 반영
8. 양쪽 결과 불일치 → 재입력 요청 (상태: disputed)

### 결과 입력 규칙

- 입력 권한: 각 팀 주장(captainEmail)만 가능
- 입력 위치: 팀 관리 페이지 (/team)
- 입력 항목: 우리팀 스코어, 상대팀 스코어
- 양쪽 주장이 모두 입력해야 경기 종료
- 양쪽 입력 결과가 일치해야 확정 → 포인트 반영
- 불일치 시 양쪽 모두 재입력

### 매치 데이터 구조 (예정)

```json
// playground-matches 테이블
{
  "matchId": "uuid",
  "homeClubId": "xxx",
  "awayClubId": "yyy",
  "sport": "축구",
  "date": "2026-03-07T15:00:00",
  "venue": "마포구민체육센터",
  "status": "scheduled | homeSubmitted | awaySubmitted | confirmed | disputed",
  "homeScore": null,
  "awayScore": null,
  "homeSubmittedBy": null,
  "awaySubmittedBy": null,
  "confirmedAt": null,
  "createdAt": "2026-02-22T..."
}
```

---

## 동아리형 스포츠 활동 플로우 (러닝크루, 스노보드, 배드민턴 등)

### 활동 흐름

1. 팀 회원 누구나 팀 관리 페이지에서 모임 일정 제안 (날짜, 시간, 장소)
2. 다른 회원들이 참가 버튼으로 참여 의사 표시
3. 해당 시간 경과 후 완료 버튼 클릭
4. 완료 시 참가자 전원 개인 +5점, 팀 +5점 반영

### 점수 산정

- 활동 완료 시: 개인 +5점, 팀 +5점 (고정)
- 승패 없음, 연승 보너스 없음

### 등급 체계

> TODO: 동아리형 종목별 등급 커트라인 별도 설정 예정

### 활동 데이터 구조 (예정)

```json
// playground-activities 테이블
{
  "activityId": "uuid",
  "clubId": "xxx",
  "sport": "러닝크루",
  "date": "2026-03-08T07:00:00",
  "venue": "한강 반포지구",
  "createdBy": "member@example.com",
  "participants": ["member1@example.com", "member2@example.com"],
  "status": "open | completed",
  "completedAt": null,
  "createdAt": "2026-02-22T..."
}
```

---

## 경기 기록 (대전형 스포츠 공통)

### 최근 경기 기록 (팀 관리 페이지)

경기 확정(confirmed) 시 팀 관리 페이지 "최근 경기 기록" 섹션에 자동 표시:
- 상대팀 이름
- 스코어 (예: 3-1)
- 결과 (승/무/패)
- 날짜

### 골 기록 (선택)

- 경기 기록에 "추가하기" 버튼
- 골 넣은 선수를 팀 멤버 목록에서 선택
- 복수 선택 가능 (여러 명 골 기록)
- 골 1개당 해당 선수 개인 포인트 +2
- 대전형 스포츠 모두 해당 (축구, 풋살, 농구, 야구, 배구, 아이스하키)

### 점수 정리 (대전형 개인)

| 항목 | 포인트 |
|------|--------|
| 경기 참여 | +3 |
| 승리 보너스 | +4 |
| 무승부 보너스 | +1 |
| 패배 보너스 | +0 |
| 연승 보너스 | +1씩 누적 |
| 골 기록 (1골당) | +2 |

### 매치 데이터 구조 업데이트

```json
// playground-matches 테이블에 goals 필드 추가
{
  "matchId": "uuid",
  "homeClubId": "xxx",
  "awayClubId": "yyy",
  "sport": "축구",
  "homeScore": 3,
  "awayScore": 1,
  "status": "confirmed",
  "goals": [
    { "scorer": "player1@example.com", "club": "xxx", "count": 2 },
    { "scorer": "player2@example.com", "club": "xxx", "count": 1 }
  ]
}
```

---

## 팀 관리 페이지 기능 정리

- 팀 정보 (이름, 종목, 전적, 멤버수)
- 선수 명단 (수정/삭제/주장설정)
- 멤버별 채팅 버튼 → 개인 1:1 채팅
- 모집중 토글
- 선수 초대 링크
- 경기 일정 (참석/불참)
- 경기 제안 받음 (수락/거절)
- 최근 경기 기록 (상대팀, 스코어, 결과) + 골 기록 추가
- 팀 스탯 (전적, 승률, 최근 5경기)
- 팀 등급 뱃지
